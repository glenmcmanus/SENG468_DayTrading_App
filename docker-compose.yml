version: "3.9"

services:
  transaction_server:
    image: python:3.8
    deploy:
      replicas: 1
    build:
      context: .
      dockerfile: src/TransactionServer/Dockerfile
    env_file:
      - .env
    networks:
      backend:
        ipv4_address: ${TRANSACTION_IP}

  #fetch_server:
  #  image: python:3.8
  #  networks:
  #    backend:
  #      ipv4_address: ${FETCH_IP}

networks:
  backend:
    driver: bridge
    ipam:
      config:
        - subnet: ${SUBNET}
          gateway: ${GATEWAY}